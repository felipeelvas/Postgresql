postgres@elvas-HP-ProBook-4430s:~$ psql
psql (14.9 (Ubuntu 14.9-0ubuntu0.22.04.1))
Type "help" for help.

postgres=# select * from funcionario;
 funcionario_id | nome | sobrenome | endereco_id | email | store_id | ativo | nome_usuario | senha | data_ultima_atualizacao | foto 
----------------+------+-----------+-------------+-------+----------+-------+--------------+-------+-------------------------+------
(0 rows)

postgres=# INSERT INTO funcionario Values(10, 'Charles','Chaplin',12,'charles_ator@email.com',15,true,'c_chaplin','senha','2023-09-15 21:00:07',Insert_image(/home/elvas/Downloads/0caa4cb886e49044c8a4f9af056a0059.jpg);
postgres(# ^C
postgres=# INSERT INTO funcionario Values(10, 'Charles','Chaplin',12,'charlesator@email.com',15,true,'c_chaplin','senha','2023-09-15 21:00:07',Insert_image(/home/elvas/Downloads/0caa4cb886e49044c8a4f9af056a0059.jpg);
postgres(# ^C
postgres=# INSERT INTO funcionario Values(10, 'Charles','Chaplin',12,'charlesator@email.com',15,true,'c_chaplin','senha','2023-09-15 21:00:07');
INSERT 0 1
postgres=# select * from funcionario;
 funcionario_id |  nome   | sobrenome | endereco_id |         email         | store_id | ativo | nome_usuario | senha | data_ultima_atualizacao | foto 
----------------+---------+-----------+-------------+-----------------------+----------+-------+--------------+-------+-------------------------+------
             10 | Charles | Chaplin   |          12 | charlesator@email.com |       15 | t     | c_chaplin    | senha | 2023-09-15 21:00:07     | 
(1 row)

postgres=# INSERT INTO funcionario(foto) Values(Insert_Image(/home/elvas/Downloads/351479.jpg-c_310_420_x-f_jpg-q_x-xxyxx.jpg));
ERROR:  syntax error at or near "/"
LINE 1: INSERT INTO funcionario(foto) Values(Insert_Image(/home/elva...
                                                          ^
postgres=# INSERT INTO funcionario(foto) Values(Insert_Image(home/elvas/Downloads/351479.jpg-c_310_420_x-f_jpg-q_x-xxyxx.jpg));
ERROR:  syntax error at or near "jpg"
LINE 1: ...) Values(Insert_Image(home/elvas/Downloads/351479.jpg-c_310_...
                                                             ^
postgres=# INSERT INTO funcionario(foto) Values(Insert_Image(home/elvas/Downloads/0caa4cb886e49044c8a4f9af056a0059.jpg));
ERROR:  syntax error at or near "caa4cb886e49044c8a4f9af056a0059"
LINE 1: ...o(foto) Values(Insert_Image(home/elvas/Downloads/0caa4cb886e...
                                                             ^
postgres=# INSERT INTO funcionario(foto) Values(Insert_Image(home/elvas/Downloads/(0caa4cb886e49044c8a4f9af056a0059.jpg)));
ERROR:  syntax error at or near "caa4cb886e49044c8a4f9af056a0059"
LINE 1: ...(foto) Values(Insert_Image(home/elvas/Downloads/(0caa4cb886e...
                                                             ^
postgres=# INSERT INTO funcionario(foto) Values(Insert_Image(home/elvas/Downloads/foto.jpg));
ERROR:  column "home" does not exist
LINE 1: INSERT INTO funcionario(foto) Values(Insert_Image(home/elvas...
                                                          ^
HINT:  Perhaps you meant to reference the column "funcionario.nome".
postgres=# INSERT INTO funcionario(funcionario.foto) Values(Insert_Image(home/elvas/Downloads/foto.jpg));
ERROR:  column "funcionario" of relation "funcionario" does not exist
LINE 1: INSERT INTO funcionario(funcionario.foto) Values(Insert_Imag...
                                ^
postgres=# INSERT INTO funcionario.foto Values(Insert_Image(home/elvas/Downloads/foto.jpg));
ERROR:  relation "funcionario.foto" does not exist
LINE 1: INSERT INTO funcionario.foto Values(Insert_Image(home/elvas/...
                    ^
postgres=# \d funcionario
                                                     Table "public.funcionario"
         Column          |            Type             | Collation | Nullable |                       Default                       
-------------------------+-----------------------------+-----------+----------+-----------------------------------------------------
 funcionario_id          | integer                     |           | not null | nextval('funcionario_funcionario_id_seq'::regclass)
 nome                    | character varying(50)       |           |          | 
 sobrenome               | character varying(50)       |           |          | 
 endereco_id             | integer                     |           | not null | nextval('funcionario_endereco_id_seq'::regclass)
 email                   | character varying(255)      |           | not null | 
 store_id                | integer                     |           | not null | nextval('funcionario_store_id_seq'::regclass)
 ativo                   | boolean                     |           |          | 
 nome_usuario            | character varying(150)      |           | not null | 
 senha                   | character varying(150)      |           | not null | 
 data_ultima_atualizacao | timestamp without time zone |           | not null | 
 foto                    | text                        |           |          | 
Indexes:
    "funcionario_pkey" PRIMARY KEY, btree (funcionario_id)
    "funcionario_email_key" UNIQUE CONSTRAINT, btree (email)

postgres=# ALTER TABLE funcionario 
ALTER COLUMN foto TYPE VARCHAR;
ALTER TABLE
postgres=# \d funcionario
                                                     Table "public.funcionario"
         Column          |            Type             | Collation | Nullable |                       Default                       
-------------------------+-----------------------------+-----------+----------+-----------------------------------------------------
 funcionario_id          | integer                     |           | not null | nextval('funcionario_funcionario_id_seq'::regclass)
 nome                    | character varying(50)       |           |          | 
 sobrenome               | character varying(50)       |           |          | 
 endereco_id             | integer                     |           | not null | nextval('funcionario_endereco_id_seq'::regclass)
 email                   | character varying(255)      |           | not null | 
 store_id                | integer                     |           | not null | nextval('funcionario_store_id_seq'::regclass)
 ativo                   | boolean                     |           |          | 
 nome_usuario            | character varying(150)      |           | not null | 
 senha                   | character varying(150)      |           | not null | 
 data_ultima_atualizacao | timestamp without time zone |           | not null | 
 foto                    | character varying           |           |          | 
Indexes:
    "funcionario_pkey" PRIMARY KEY, btree (funcionario_id)
    "funcionario_email_key" UNIQUE CONSTRAINT, btree (email)

postgres=# ALTER TABLE funcionario 
ALTER COLUMN foto TYPE VARCHAR(MAX);
ERROR:  syntax error at or near "MAX"
LINE 2: ALTER COLUMN foto TYPE VARCHAR(MAX);
                                       ^
postgres=# \d funcionario
                                                     Table "public.funcionario"
         Column          |            Type             | Collation | Nullable |                       Default                       
-------------------------+-----------------------------+-----------+----------+-----------------------------------------------------
 funcionario_id          | integer                     |           | not null | nextval('funcionario_funcionario_id_seq'::regclass)
 nome                    | character varying(50)       |           |          | 
 sobrenome               | character varying(50)       |           |          | 
 endereco_id             | integer                     |           | not null | nextval('funcionario_endereco_id_seq'::regclass)
 email                   | character varying(255)      |           | not null | 
 store_id                | integer                     |           | not null | nextval('funcionario_store_id_seq'::regclass)
 ativo                   | boolean                     |           |          | 
 nome_usuario            | character varying(150)      |           | not null | 
 senha                   | character varying(150)      |           | not null | 
 data_ultima_atualizacao | timestamp without time zone |           | not null | 
 foto                    | character varying           |           |          | 
Indexes:
    "funcionario_pkey" PRIMARY KEY, btree (funcionario_id)
    "funcionario_email_key" UNIQUE CONSTRAINT, btree (email)

postgres=# ALTER TABLE funcionario 
ALTER COLUMN foto TYPE VARCHAR NOT NULL;
ERROR:  syntax error at or near "NOT"
LINE 2: ALTER COLUMN foto TYPE VARCHAR NOT NULL;
                                       ^
postgres=# \d funcionario
                                                     Table "public.funcionario"
         Column          |            Type             | Collation | Nullable |                       Default                       
-------------------------+-----------------------------+-----------+----------+-----------------------------------------------------
 funcionario_id          | integer                     |           | not null | nextval('funcionario_funcionario_id_seq'::regclass)
 nome                    | character varying(50)       |           |          | 
 sobrenome               | character varying(50)       |           |          | 
 endereco_id             | integer                     |           | not null | nextval('funcionario_endereco_id_seq'::regclass)
 email                   | character varying(255)      |           | not null | 
 store_id                | integer                     |           | not null | nextval('funcionario_store_id_seq'::regclass)
 ativo                   | boolean                     |           |          | 
 nome_usuario            | character varying(150)      |           | not null | 
 senha                   | character varying(150)      |           | not null | 
 data_ultima_atualizacao | timestamp without time zone |           | not null | 
 foto                    | character varying           |           |          | 
Indexes:
    "funcionario_pkey" PRIMARY KEY, btree (funcionario_id)
    "funcionario_email_key" UNIQUE CONSTRAINT, btree (email)

postgres=# SELECT * FROM funcionario where foto;
ERROR:  argument of WHERE must be type boolean, not type character varying
LINE 1: SELECT * FROM funcionario where foto;
                                        ^
postgres=# SELECT * FROM funcionario where foto=null;
 funcionario_id | nome | sobrenome | endereco_id | email | store_id | ativo | nome_usuario | senha | data_ultima_atualizacao | foto 
----------------+------+-----------+-------------+-------+----------+-------+--------------+-------+-------------------------+------
(0 rows)

postgres=# SELECT * FROM funcionario where nome;
ERROR:  argument of WHERE must be type boolean, not type character varying
LINE 1: SELECT * FROM funcionario where nome;
                                        ^
postgres=# SELECT * FROM funcionario where nome=?;
ERROR:  syntax error at or near ";"
LINE 1: SELECT * FROM funcionario where nome=?;
                                              ^
postgres=# SELECT * FROM funcionario where nome=Charles;
ERROR:  column "charles" does not exist
LINE 1: SELECT * FROM funcionario where nome=Charles;
                                             ^
postgres=# SELECT * FROM funcionario where nome='Charles';
 funcionario_id |  nome   | sobrenome | endereco_id |         email         | store_id | ativo | nome_usuario | senha | data_ultima_atualizacao | foto 
----------------+---------+-----------+-------------+-----------------------+----------+-------+--------------+-------+-------------------------+------
             10 | Charles | Chaplin   |          12 | charlesator@email.com |       15 | t     | c_chaplin    | senha | 2023-09-15 21:00:07     | 
(1 row)

postgres=# UPDATE funcionario SET email = 'charles_ator@email.com' WHERE funcionario_id = 10;
UPDATE 1
postgres=# SELECT * FROM funcionario where funcionario_id = 10;;
 funcionario_id |  nome   | sobrenome | endereco_id |         email          | store_id | ativo | nome_usuario | senha | data_ultima_atualizacao | foto 
----------------+---------+-----------+-------------+------------------------+----------+-------+--------------+-------+-------------------------+------
             10 | Charles | Chaplin   |          12 | charles_ator@email.com |       15 | t     | c_chaplin    | senha | 2023-09-15 21:00:07     | 
(1 row)

postgres=# 


1) PostgreSQL UPDATE – atualizando uma linha
A instrução a seguir usa a UPDATEinstrução para atualizar o curso com id 3. Ela altera published_datede NULLpara '2020-08-01'.

UPDATE courses
SET published_date = '2020-08-01' 
WHERE course_id = 3;
Linguagem de código:  SQL (linguagem de consulta estruturada)  ( sql )
A instrução retorna a seguinte mensagem indicando que uma linha foi atualizada:

UPDATE 1
Linguagem de código:  Sessão Shell  ( shell )
A instrução a seguir seleciona o curso com id 3 para verificar a atualização:

SELECT * 
FROM courses
WHERE course_id = 3;

